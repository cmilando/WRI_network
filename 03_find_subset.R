#' ============================================================================
#' ////////////////////////////////////////////////////////////////////////////
#' Test with one K-monitors
#' 
#' ////////////////////////////////////////////////////////////////////////////
#' ============================================================================
system("R CMD SHLIB simann.f90")

dyn.unload("simann.so")

dyn.load("simann.so")

oo <- .Fortran("simann",
               S = as.integer(S),
               df_wide = df_wide,
               magic_n = as.integer(k),
               nsites = as.integer(N),
               ndays = as.integer(N_daymet),
               score_cols = as.integer(3),
               SCORE = 0.,
               cooling_rate = 0.95,
               verbose = as.integer(1)) 

# confirming math
get_score(oo$S)
oo$SCORE

#' ============================================================================
#' ////////////////////////////////////////////////////////////////////////////
#' Now in parallel, computer for 1:N monitors 
#' 
#' ////////////////////////////////////////////////////////////////////////////
#' ============================================================================

library(future)







#' ============================================================================
#' ////////////////////////////////////////////////////////////////////////////
#' Make the curve 
#' 
#' ////////////////////////////////////////////////////////////////////////////
#' ============================================================================